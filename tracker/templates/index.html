<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expense Tracker</title>
  <style>
    .owner-name {
      font-family: 'Montserrat', 'Segoe UI', 'Arial', sans-serif;
      font-size: 2rem;
      font-weight: 800;
      font-style: italic;
      letter-spacing: 2px;
      background: linear-gradient(90deg, #ff8a00, #e52e71, #4a90e2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 2px 2px 8px rgba(229, 46, 113, 0.15);
      padding: 0 6px;
      border-radius: 6px;
      display: inline-block;
      vertical-align: middle;
    }
  </style>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/media/css/main.css">
</head>

<body>
  <h1 class="main-title"><span class="owner-name">D A Sai Kiran's</span> Expense Tracker <span class="emoji">üí∏</span></h1>
  <div class="main-flex">
    <div class="container glass">
      <div class="header">
        <img src="https://i.ibb.co/jfScDTC/budget.png" alt="Expense Tracker" class="logo-img" />
        <div class="balance-container animated-balance">
          <h2>Your Balance</h2>
          <h2 id="balance" class="balance {% if current_balance < 0 %} balance-minus {% else %} balance-plus {% endif %} ">‚Çπ{{current_balance}}</h2>
        </div>
      </div>
      <div class="inc-exp-container">
        <div>
          <h4>Income</h4>
          <p id="money-plus" class="money plus">‚Çπ {{income}}</p>
        </div>
        <div>
          <h4>Expenses</h4>
          <p id="money-minus" class="money minus">‚Çπ {{expense}}</p>
        </div>
      </div>
      <h3 class="add-title">Add new transaction <span class="emoji">üìù</span></h3>
      <form method="POST" id="form">
        {% csrf_token %}
        <div class="form-control">
          <label for="text">Description</label>
          <input type="text" name="description" id="text" placeholder="Enter description..." autocomplete="off" />
        </div>
        <div class="form-control">
          <label for="amount">Amount <br />
            <small>(-100 = expense, 100 = income)</small></label>
          <input type="number" name="amount" id="amount" placeholder="Enter amount..." autocomplete="off" />
        </div>
        <button class="btn">Add transaction</button>
      </form>
      <!-- Notification -->
      <div class="notification-container" id="notification">
        <p>Please add a description and amount</p>
        <button id="remove"><i class="fa-solid fa-xmark"></i></button>
      </div>
    </div>
    <div class="history-container glass">
      <h3 class="history-title">History <span class="emoji">üìú</span></h3>
      <ul id="list" class="list">
        {% for transaction in transactions %}
        <li class="{% if transaction.expense_type == 'DEBIT'%} minus {% else %} plus {% endif%}">
          <span class="desc">{{transaction.description}}</span>
          <span class="amount">{{transaction.amount}}</span>
          <a href="{% url 'delete' transaction.id %}" class="delete-btn" title="Delete"><i
              class="fa-solid fa-trash"></i></a>
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <footer class="footer">Made with <span class="emoji">‚ù§Ô∏è</span> for your wallet</footer>
  <script>
    document.getElementById('form').addEventListener('submit', function (e) {
      const description = document.getElementById('text').value.trim();
      const amount = document.getElementById('amount').value.trim();
      if (!description || !amount) {
        e.preventDefault();
        document.getElementById('notification').classList.add('show');
        document.querySelector('#notification p').textContent = "Please add a description and amount";
      } else if (amount == 0) {
        e.preventDefault();
        document.getElementById('notification').classList.add('show');
        document.querySelector('#notification p').textContent = "The amount cannot be 0";
      } else {
        btn.disabled = true;
        document.getElementById('notification').classList.remove('show');
      }
    });
    document.getElementById('remove').addEventListener('click', (e) => {
      document.getElementById('notification').classList.remove('show');
    })
  </script>
</body>

</html>